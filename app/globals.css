@tailwind base;
@tailwind components;
@tailwind utilities;
@import 'lenis/dist/lenis.css';

@layer base {
  html,
  body {
    height: auto;
    overflow-x: hidden; /* Prevent horizontal scrolling on mobile */
    overflow-y: auto;   /* Allow vertical scrolling */
    margin: 0;
    padding: 0;
  }
  
  html {
    font-family: system-ui, sans-serif;
  }

  /* Ensure native scrolling on mobile devices */
  @media (max-width: 1024px) {
    html, body {
      scroll-behavior: auto !important;
      overflow-x: hidden !important;
      overflow-y: auto !important;
    }
    
    /* Override any Lenis styles on mobile */
    html.lenis, html.lenis body {
      height: auto !important;
      overflow-x: hidden !important;
      overflow-y: auto !important;
    }
  }

  /* Mobile device specific overrides */
  html.mobile-device, html.mobile-device body {
    scroll-behavior: auto !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    height: auto !important;
  }

  /* Desktop device specific styles */
  html.desktop-device {
    /* Lenis smooth scrolling will handle this */
  }
} 

@layer utilities {
  /* Custom cursor for tech stack section */
  .tech-stack-cursor {
    cursor: none;
  }
  
  .animate-cta {
    animation: cta-pulse 1.2s cubic-bezier(0.4,0,0.2,1) 0.2s 1 both;
  }
  @keyframes cta-pulse {
    0% { box-shadow: 0 0 0 0 rgba(236,72,153,0.4), 0 0 0 0 rgba(168,139,250,0.3); transform: scale(0.95); }
    60% { box-shadow: 0 0 0 12px rgba(236,72,153,0.15), 0 0 0 8px rgba(168,139,250,0.10); transform: scale(1.05); }
    100% { box-shadow: 0 0 0 0 rgba(236,72,153,0.0), 0 0 0 0 rgba(168,139,250,0.0); transform: scale(1); }
  }
  .animate-gradient-move {
    animation: gradient-move 12s ease-in-out infinite alternate;
  }
  @keyframes gradient-move {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
  }
  
  .animate-spin-slow {
    animation: spin-slow 20s linear infinite;
  }
  @keyframes spin-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  .animate-spin-slow-reverse {
    animation: spin-slow-reverse 15s linear infinite;
  }
  @keyframes spin-slow-reverse {
    from { transform: rotate(360deg); }
    to { transform: rotate(0deg); }
  }
  
  .animate-dash {
    animation: dash 6s linear infinite;
  }
  @keyframes dash {
    to {
      stroke-dashoffset: -48;
    }
  }
  
  .animate-pill {
    animation: pillFade 3s ease-in-out infinite;
  }
  @keyframes pillFade {
    0%, 100% {
      opacity: 0.4;
      transform: translateY(0);
    }
    50% {
      opacity: 1;
      transform: translateY(-2px);
    }
  }
}

/* SAFARI-ONLY: Performance optimizations to reduce GPU pressure */
/* These optimizations only apply to Safari (desktop + iOS) */
/* Chrome, Edge, Brave, and Firefox are unaffected */
@supports (-webkit-touch-callout: none) {
  /* Remove backdrop filters globally in Safari (expensive GPU operation) */
  * {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  
  /* Replace backdrop blur utilities with solid backgrounds */
  .backdrop-blur-sm,
  .backdrop-blur-md,
  .backdrop-blur-lg,
  .backdrop-blur-xl {
    background: rgba(0, 0, 0, 0.8) !important;
  }
  
  /* Simplify blur filters (expensive in Safari) */
  [style*="filter: blur"],
  [style*="filter:blur"],
  /* SAFARI-ONLY: Force remove blur from animated cards to fix permanent blur bug */
  /* Target motion.div elements that contain project cards */
  .safari-no-blur,
  section#smooth [style*="filter"],
  section#smooth > div > div[style*="filter"] {
    filter: none !important;
  }
  
  /* Remove complex masks (trigger repaints in Safari) */
  [style*="mask-image"],
  [style*="-webkit-mask-image"],
  [style*="mask-image:"] {
    mask-image: none !important;
    -webkit-mask-image: none !important;
  }
  
  /* Reduce will-change hints (let Safari decide layer promotion) */
  [style*="will-change"] {
    will-change: auto !important;
  }
}
